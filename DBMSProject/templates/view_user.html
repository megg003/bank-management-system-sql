{% extends "base.html" %}

{% block content %}
<div class="container my-5">
    <h2 class="text-center mb-4" style="color: #004d40;">View User</h2>
    <div class="card shadow-lg" style="border-radius: 10px;">
        <div class="card-body">
            <h5 class="card-title">User Details</h5>
            <p class="card-text"><strong>Account Number:</strong> {{ user.account_id }}</p>
            <p class="card-text"><strong>User ID:</strong> {{ user.user_id }}</p>
            <p class="card-text"><strong>Name:</strong> {{ user.first_name }} {% if user.middle_name %}{{ user.middle_name }} {% endif %}{{ user.last_name }}</p>
            <p class="card-text"><strong>Email:</strong> {{ user.email }}</p>
            
            <!-- Display loan statistics for the user -->
            <h5 class="mt-4">Loan Statistics</h5>
            <p class="card-text"><strong>Approved Loan Count:</strong> {{ approved_loan_count }}</p>
            <p class="card-text"><strong>Total Approved Loan Amount:</strong> ${{ total_approved_loan_amount }}</p>
            <p class="card-text"><strong>Average Approved Loan Amount:</strong> ${{ average_loan_amount }}</p>

            <!-- Delete Button -->
            <form action="{{ url_for('delete_user', user_id=user.user_id) }}" method="POST" onsubmit="return confirm('Are you sure you want to delete this user?')">
                <button type="submit" class="btn btn-danger">Delete User</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}
